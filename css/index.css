/* ==========================================================================
   Windows 98 Theme + Apple Animations
   ========================================================================== */

/* -- Apple-style spring animation keyframes -- */

@keyframes windowOpen {
  0% {
    opacity: 0;
    transform: scale(0.5);
  }
  60% {
    transform: scale(1.02);
  }
  80% {
    transform: scale(0.99);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes fadeSlideIn {
  0% {
    opacity: 0;
    transform: translateY(12px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes taskbarSlide {
  0% {
    transform: translateY(100%);
  }
  60% {
    transform: translateY(-3px);
  }
  100% {
    transform: translateY(0);
  }
}

/* ==========================================================================
   Design Tokens
   ========================================================================== */

:root {
  /* Win98 palette */
  --win-bg: #008080;
  --win-surface: #c0c0c0;
  --win-surface-dark: #808080;
  --win-surface-light: #dfdfdf;
  --win-white: #ffffff;
  --win-black: #000000;
  --win-title-start: #000080;
  --win-title-end: #1084d0;
  --win-title-text: #ffffff;
  --win-highlight: #000080;
  --win-highlight-text: #ffffff;
  --win-link: #0000ff;
  --win-link-visited: #800080;
  --win-btn-face: #c0c0c0;
  --win-btn-highlight: #ffffff;
  --win-btn-shadow: #808080;
  --win-btn-dark-shadow: #000000;
  --win-field-bg: #ffffff;
  --win-taskbar: #c0c0c0;
  --win-start-green: #008000;
  --content-width: 48rem;

  /* Apple animation curves */
  --apple-ease: cubic-bezier(0.25, 0.1, 0.25, 1);
  --apple-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --apple-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --apple-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* ==========================================================================
   Base
   ========================================================================== */

html {
  font-size: 13px;
  scroll-behavior: smooth;
}

body {
  font-family: 'Tahoma', 'Segoe UI', 'Geneva', 'Verdana', sans-serif;
  background: var(--win-bg);
  color: var(--win-black);
  margin: 0;
  padding: 0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  line-height: 1.5;
}

::selection {
  background: var(--win-highlight);
  color: var(--win-highlight-text);
}

/* ==========================================================================
   Desktop
   ========================================================================== */

.desktop {
  flex: 1;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: 24px 16px;
  padding-bottom: 16px;
}

/* ==========================================================================
   Window
   ========================================================================== */

.window {
  width: 100%;
  max-width: var(--content-width);
  background: var(--win-surface);
  border: 2px solid;
  border-color: var(--win-btn-highlight) var(--win-btn-dark-shadow) var(--win-btn-dark-shadow) var(--win-btn-highlight);
  box-shadow:
    inset 1px 1px 0 var(--win-surface-light),
    inset -1px -1px 0 var(--win-btn-shadow);
  animation: windowOpen 0.5s var(--apple-spring) both;
}

/* ==========================================================================
   Title Bar
   ========================================================================== */

.title-bar {
  background: linear-gradient(90deg, var(--win-title-start), var(--win-title-end));
  color: var(--win-title-text);
  display: flex;
  align-items: center;
  padding: 2px 3px;
  gap: 4px;
  height: 22px;
  user-select: none;
}

.title-bar__icon {
  display: flex;
  align-items: center;
  flex-shrink: 0;
}

.title-bar__icon img {
  width: 16px;
  height: 16px;
  image-rendering: pixelated;
}

.title-bar__text {
  flex: 1;
  font-size: 12px;
  font-weight: 700;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  letter-spacing: 0;
}

.title-bar__controls {
  display: flex;
  gap: 2px;
  flex-shrink: 0;
}

.title-bar__btn {
  width: 16px;
  height: 14px;
  background: var(--win-btn-face);
  border: 1px solid;
  border-color: var(--win-btn-highlight) var(--win-btn-dark-shadow) var(--win-btn-dark-shadow) var(--win-btn-highlight);
  box-shadow: inset 1px 1px 0 var(--win-surface-light), inset -1px -1px 0 var(--win-btn-shadow);
  font-size: 9px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  padding: 0;
  color: var(--win-black);
  transition: transform 0.15s var(--apple-spring);
}

.title-bar__btn:hover {
  transform: scale(1.15);
}

.title-bar__btn:active {
  border-color: var(--win-btn-dark-shadow) var(--win-btn-highlight) var(--win-btn-highlight) var(--win-btn-dark-shadow);
  box-shadow: inset 1px 1px 0 var(--win-btn-shadow), inset -1px -1px 0 var(--win-surface-light);
  transform: scale(0.95);
}

/* ==========================================================================
   Menu Bar
   ========================================================================== */

.menu-bar {
  display: flex;
  background: var(--win-surface);
  border-bottom: 1px solid var(--win-btn-shadow);
  padding: 1px 0;
  animation: fadeSlideIn 0.4s var(--apple-ease) 0.15s both;
}

.menu-bar__item {
  padding: 3px 10px;
  font-size: 12px;
  text-decoration: none;
  color: var(--win-black);
  transition: all 0.2s var(--apple-smooth);
  position: relative;
}

.menu-bar__item:visited {
  color: var(--win-black);
}

.menu-bar__item:hover {
  background: var(--win-highlight);
  color: var(--win-highlight-text);
}

.menu-bar__item:active {
  transform: scale(0.96);
}

.menu-bar__item::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 0;
  height: 2px;
  background: var(--win-highlight);
  transition: all 0.3s var(--apple-spring);
  transform: translateX(-50%);
}

.menu-bar__item:hover::after {
  width: calc(100% - 20px);
}

/* ==========================================================================
   Window Content Area
   ========================================================================== */

.window__content {
  background: var(--win-field-bg);
  border: 2px solid;
  border-color: var(--win-btn-shadow) var(--win-btn-highlight) var(--win-btn-highlight) var(--win-btn-shadow);
  box-shadow: inset 1px 1px 0 var(--win-btn-dark-shadow), inset -1px -1px 0 var(--win-surface-light);
  margin: 3px;
  padding: 16px 20px;
  min-height: 300px;
  overflow: auto;
  animation: fadeSlideIn 0.5s var(--apple-ease) 0.25s both;
}

/* ==========================================================================
   Header (inside window)
   ========================================================================== */

header {
  margin-bottom: 16px;
}

header h1 {
  font-size: 22px;
  font-weight: 700;
  margin: 0 0 4px;
  color: var(--win-black);
  animation: fadeSlideIn 0.4s var(--apple-ease) 0.35s both;
}

header time {
  display: block;
  color: var(--win-surface-dark);
  font-size: 11px;
}

/* ==========================================================================
   Main Content
   ========================================================================== */

main {
  animation: fadeSlideIn 0.5s var(--apple-ease) 0.4s both;
}

main h2 {
  font-size: 16px;
  font-weight: 700;
  margin-top: 24px;
  margin-bottom: 8px;
  color: var(--win-title-start);
  border-bottom: 1px solid var(--win-surface);
  padding-bottom: 4px;
}

main h2:first-child {
  margin-top: 0;
}

main h3 {
  font-size: 14px;
  font-weight: 700;
  margin-bottom: 2px;
}

main p {
  margin-bottom: 12px;
  line-height: 1.6;
  max-inline-size: unset;
}

main a {
  color: var(--win-link);
  text-decoration: underline;
  transition: color 0.2s var(--apple-smooth);
}

main a:visited {
  color: var(--win-link-visited);
}

main a:hover {
  color: var(--win-highlight);
}

/* ==========================================================================
   Blockquotes
   ========================================================================== */

blockquote {
  border-left: 3px solid var(--win-highlight);
  margin: 0 0 12px;
  padding: 8px 12px;
  background: var(--win-surface-light);
  color: var(--win-black);
  font-style: italic;
  border-right: 1px solid var(--win-btn-shadow);
  border-bottom: 1px solid var(--win-btn-shadow);
  border-top: 1px solid var(--win-btn-highlight);
}

blockquote p {
  margin-bottom: 0;
}

/* ==========================================================================
   Code Blocks (sunken field style)
   ========================================================================== */

pre[class*="language-"] {
  background: var(--win-field-bg);
  border: 2px solid;
  border-color: var(--win-btn-shadow) var(--win-btn-highlight) var(--win-btn-highlight) var(--win-btn-shadow);
  box-shadow: inset 1px 1px 0 var(--win-btn-dark-shadow);
  padding: 12px;
  overflow: auto;
  max-inline-size: unset;
  font-size: 12px;
  font-family: 'Courier New', 'Lucida Console', monospace;
  border-radius: 0;
}

pre.highlight {
  background: var(--win-field-bg);
  border: 2px solid;
  border-color: var(--win-btn-shadow) var(--win-btn-highlight) var(--win-btn-highlight) var(--win-btn-shadow);
  box-shadow: inset 1px 1px 0 var(--win-btn-dark-shadow);
  padding: 12px;
  overflow: auto;
  max-inline-size: unset;
  border-radius: 0;
}

/* Syntax highlighting theme - accessible overrides */
.token.url, .token.symbol, .token.number, .token.boolean, .token.variable, .token.constant, .token.inserted {
  color: #23706f;
}

.token.attr-name, .token.property, .token.regex, .token.entity {
  color: #b50000;
}

/* ==========================================================================
   Hero / Intro
   ========================================================================== */

.hero {
  font-size: 13px;
  color: var(--win-black);
  line-height: 1.6;
  margin-bottom: 16px;
  padding: 8px 10px;
  background: var(--win-surface);
  border: 2px solid;
  border-color: var(--win-btn-highlight) var(--win-btn-dark-shadow) var(--win-btn-dark-shadow) var(--win-btn-highlight);
  box-shadow: inset 1px 1px 0 var(--win-surface-light), inset -1px -1px 0 var(--win-btn-shadow);
  animation: fadeSlideIn 0.5s var(--apple-ease) 0.5s both;
}

/* ==========================================================================
   Social Links (old nav - hide it)
   ========================================================================== */

nav.vertical {
  display: none;
}

/* ==========================================================================
   Post List (items)
   ========================================================================== */

.items {
  list-style: none;
  margin: 0;
  padding: 0;
  margin-bottom: 12px;
  background: var(--win-field-bg);
  border: 2px solid;
  border-color: var(--win-btn-shadow) var(--win-btn-highlight) var(--win-btn-highlight) var(--win-btn-shadow);
  box-shadow: inset 1px 1px 0 var(--win-btn-dark-shadow);
}

.items > li {
  margin: 0;
  padding: 6px 8px;
  max-inline-size: unset;
  border-bottom: 1px solid var(--win-surface);
  transition: all 0.25s var(--apple-smooth);
  cursor: default;
}

.items > li:last-child {
  border-bottom: none;
}

.items > li:hover {
  background: var(--win-highlight);
  color: var(--win-highlight-text);
}

.items > li:hover a,
.items > li:hover small {
  color: var(--win-highlight-text) !important;
}

.items > li:first-child {
  border-top: none;
}

.items > li > a {
  display: block;
  font-weight: 700;
  color: var(--win-black);
  text-decoration: none;
  font-size: 12px;
  transition: color 0.2s var(--apple-smooth);
}

.items > li > a:hover {
  color: var(--win-highlight-text);
}

.items > li > small {
  color: var(--win-surface-dark);
  transition: color 0.2s var(--apple-smooth);
}

/* ==========================================================================
   "See more" Links (Win98 button style)
   ========================================================================== */

main > p > a[href^="/"] {
  display: inline-block;
  text-decoration: none;
  color: var(--win-black);
  background: var(--win-btn-face);
  border: 2px solid;
  border-color: var(--win-btn-highlight) var(--win-btn-dark-shadow) var(--win-btn-dark-shadow) var(--win-btn-highlight);
  box-shadow: inset 1px 1px 0 var(--win-surface-light), inset -1px -1px 0 var(--win-btn-shadow);
  padding: 3px 16px;
  font-size: 12px;
  font-weight: 400;
  cursor: pointer;
  transition: transform 0.2s var(--apple-spring);
}

main > p > a[href^="/"]:visited {
  color: var(--win-black);
}

main > p > a[href^="/"]:hover {
  transform: scale(1.04);
}

main > p > a[href^="/"]:active {
  border-color: var(--win-btn-dark-shadow) var(--win-btn-highlight) var(--win-btn-highlight) var(--win-btn-dark-shadow);
  box-shadow: inset 1px 1px 0 var(--win-btn-shadow), inset -1px -1px 0 var(--win-surface-light);
  transform: scale(0.97);
}

main > p > a[href^="/"]::after {
  content: ' \25B6';
  font-size: 8px;
  vertical-align: middle;
}

/* ==========================================================================
   Notes
   ========================================================================== */

toot-embed {
  display: block;
}

#notes > li:not(:last-child)::after {
  content: '';
  display: block;
  width: 100%;
  height: 1px;
  background: var(--win-surface);
  margin-top: 8px;
}

/* ==========================================================================
   Image Grid
   ========================================================================== */

.image-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 3px;
  margin-bottom: 12px;
  background: var(--win-surface);
  border: 2px solid;
  border-color: var(--win-btn-shadow) var(--win-btn-highlight) var(--win-btn-highlight) var(--win-btn-shadow);
  box-shadow: inset 1px 1px 0 var(--win-btn-dark-shadow);
  padding: 3px;
}

.image-grid a {
  display: block;
  overflow: hidden;
  aspect-ratio: 1;
  border: 1px solid var(--win-btn-shadow);
}

.image-grid img {
  object-fit: cover;
  width: 100%;
  height: 100%;
  transition: transform 0.4s var(--apple-spring), filter 0.3s var(--apple-ease);
}

.image-grid a:hover img {
  transform: scale(1.08);
  filter: brightness(1.05);
}

.image-grid a:active img {
  transform: scale(0.96);
  transition-duration: 0.1s;
}

@media only screen and (max-width: 600px) {
  .image-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ==========================================================================
   Info Box (Win98 message box style)
   ========================================================================== */

.info {
  border: 2px solid;
  border-color: var(--win-btn-highlight) var(--win-btn-dark-shadow) var(--win-btn-dark-shadow) var(--win-btn-highlight);
  box-shadow: inset 1px 1px 0 var(--win-surface-light), inset -1px -1px 0 var(--win-btn-shadow);
  border-radius: 0;
  padding: 8px 12px;
  margin-bottom: 12px;
  background: var(--win-surface);
}

.info > pre {
  margin-top: 8px;
}

/* ==========================================================================
   Small / Meta text
   ========================================================================== */

small {
  font-size: 11px;
  display: block;
  max-inline-size: unset;
  color: var(--win-surface-dark);
}

/* ==========================================================================
   Ordered Lists
   ========================================================================== */

:where(ol) {
  margin-bottom: 12px;
}

/* ==========================================================================
   Posts Index (linked cards)
   ========================================================================== */

main > a:has(h3) {
  display: block;
  text-decoration: none;
  color: inherit;
  padding: 6px 8px;
  margin-bottom: 2px;
  background: var(--win-field-bg);
  border: 1px solid var(--win-surface);
  transition: all 0.25s var(--apple-smooth);
}

main > a:has(h3):hover {
  background: var(--win-highlight);
  color: var(--win-highlight-text);
  border-color: var(--win-highlight);
}

main > a:has(h3):hover h3,
main > a:has(h3):hover small {
  color: var(--win-highlight-text);
}

main > a:has(h3):active {
  transform: scale(0.99);
}

main > a:has(h3) h3 {
  margin: 0 0 2px;
  color: var(--win-link);
  font-size: 13px;
  transition: color 0.2s var(--apple-smooth);
}

main > a:has(h3) small {
  color: var(--win-surface-dark);
  transition: color 0.2s var(--apple-smooth);
}

/* ==========================================================================
   Status Bar
   ========================================================================== */

.status-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--win-surface);
  border-top: 1px solid var(--win-btn-highlight);
  padding: 2px 4px;
  font-size: 11px;
  gap: 4px;
  animation: fadeSlideIn 0.3s var(--apple-ease) 0.55s both;
}

.status-bar__section {
  display: flex;
  gap: 8px;
  padding: 1px 4px;
  border: 1px solid;
  border-color: var(--win-btn-shadow) var(--win-btn-highlight) var(--win-btn-highlight) var(--win-btn-shadow);
  flex-shrink: 0;
}

.status-bar__section a {
  color: var(--win-link);
  text-decoration: none;
  font-size: 11px;
  transition: all 0.2s var(--apple-smooth);
}

.status-bar__section a:visited {
  color: var(--win-link);
}

.status-bar__section a:hover {
  color: var(--win-highlight);
  text-decoration: underline;
}

.status-bar__section--right {
  color: var(--win-surface-dark);
  margin-left: auto;
}

/* ==========================================================================
   Taskbar
   ========================================================================== */

.taskbar {
  background: var(--win-taskbar);
  border-top: 2px solid var(--win-btn-highlight);
  display: flex;
  align-items: center;
  padding: 2px 4px;
  height: 30px;
  position: sticky;
  bottom: 0;
  z-index: 100;
  box-shadow: inset 0 1px 0 var(--win-surface-light);
  animation: taskbarSlide 0.4s var(--apple-spring) 0.1s both;
}

.start-button {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: var(--win-btn-face);
  border: 2px solid;
  border-color: var(--win-btn-highlight) var(--win-btn-dark-shadow) var(--win-btn-dark-shadow) var(--win-btn-highlight);
  box-shadow: inset 1px 1px 0 var(--win-surface-light), inset -1px -1px 0 var(--win-btn-shadow);
  padding: 1px 8px;
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  text-decoration: none;
  color: var(--win-black);
  height: 22px;
  transition: transform 0.2s var(--apple-spring);
}

.start-button:visited {
  color: var(--win-black);
}

.start-button:hover {
  transform: scale(1.04);
}

.start-button:active {
  border-color: var(--win-btn-dark-shadow) var(--win-btn-highlight) var(--win-btn-highlight) var(--win-btn-dark-shadow);
  box-shadow: inset 1px 1px 0 var(--win-btn-shadow), inset -1px -1px 0 var(--win-surface-light);
  transform: scale(0.97);
}

.start-button__flag {
  color: var(--win-start-green);
  font-size: 14px;
  line-height: 1;
}

.taskbar__tray {
  margin-left: auto;
  display: flex;
  align-items: center;
  border: 1px solid;
  border-color: var(--win-btn-shadow) var(--win-btn-highlight) var(--win-btn-highlight) var(--win-btn-shadow);
  padding: 1px 8px;
  height: 20px;
  font-size: 11px;
  color: var(--win-black);
}

.taskbar__clock {
  font-variant-numeric: tabular-nums;
}

/* ==========================================================================
   Unordered list styling
   ========================================================================== */

main ul:not(.items) {
  padding-left: 20px;
}

main ul:not(.items) li {
  margin-bottom: 4px;
  max-inline-size: unset;
}

/* ==========================================================================
   404 Page
   ========================================================================== */

.not-found {
  text-align: center;
  padding: 40px 0;
}

.not-found p {
  max-inline-size: unset;
}

/* ==========================================================================
   View Transitions (Apple-style cross-fade)
   ========================================================================== */

@supports (view-transition-name: name) {
  header {
    view-transition-name: header;
  }

  main {
    view-transition-name: main;
  }
}

/* ==========================================================================
   Mobile Responsive
   ========================================================================== */

@media only screen and (max-width: 600px) {
  .desktop {
    padding: 8px 4px;
  }

  .window__content {
    padding: 10px 12px;
  }

  header h1 {
    font-size: 18px;
  }

  .menu-bar {
    flex-wrap: wrap;
  }

  .status-bar {
    flex-wrap: wrap;
  }

  .status-bar__section {
    flex-wrap: wrap;
    gap: 4px;
  }
}

/* ==========================================================================
   Scrollbar (Win98 style)
   ========================================================================== */

.window__content::-webkit-scrollbar {
  width: 16px;
}

.window__content::-webkit-scrollbar-track {
  background: var(--win-surface-light);
  border-left: 1px solid var(--win-btn-shadow);
}

.window__content::-webkit-scrollbar-thumb {
  background: var(--win-btn-face);
  border: 2px solid;
  border-color: var(--win-btn-highlight) var(--win-btn-dark-shadow) var(--win-btn-dark-shadow) var(--win-btn-highlight);
  box-shadow: inset 1px 1px 0 var(--win-surface-light), inset -1px -1px 0 var(--win-btn-shadow);
}

.window__content::-webkit-scrollbar-button {
  background: var(--win-btn-face);
  border: 2px solid;
  border-color: var(--win-btn-highlight) var(--win-btn-dark-shadow) var(--win-btn-dark-shadow) var(--win-btn-highlight);
  height: 16px;
}
