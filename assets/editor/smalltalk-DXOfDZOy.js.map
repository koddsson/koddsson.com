{"version":3,"file":"smalltalk-DXOfDZOy.js","sources":["../node_modules/@codemirror/legacy-modes/mode/smalltalk.js"],"sourcesContent":["var specialChars = /[+\\-\\/\\\\*~<>=@%|&?!.,:;^]/;\nvar keywords = /true|false|nil|self|super|thisContext/;\n\nvar Context = function(tokenizer, parent) {\n  this.next = tokenizer;\n  this.parent = parent;\n};\n\nvar Token = function(name, context, eos) {\n  this.name = name;\n  this.context = context;\n  this.eos = eos;\n};\n\nvar State = function() {\n  this.context = new Context(next, null);\n  this.expectVariable = true;\n  this.indentation = 0;\n  this.userIndentationDelta = 0;\n};\n\nState.prototype.userIndent = function(indentation, indentUnit) {\n  this.userIndentationDelta = indentation > 0 ? (indentation / indentUnit - this.indentation) : 0;\n};\n\nvar next = function(stream, context, state) {\n  var token = new Token(null, context, false);\n  var aChar = stream.next();\n\n  if (aChar === '\"') {\n    token = nextComment(stream, new Context(nextComment, context));\n\n  } else if (aChar === '\\'') {\n    token = nextString(stream, new Context(nextString, context));\n\n  } else if (aChar === '#') {\n    if (stream.peek() === '\\'') {\n      stream.next();\n      token = nextSymbol(stream, new Context(nextSymbol, context));\n    } else {\n      if (stream.eatWhile(/[^\\s.{}\\[\\]()]/))\n        token.name = 'string.special';\n      else\n        token.name = 'meta';\n    }\n\n  } else if (aChar === '$') {\n    if (stream.next() === '<') {\n      stream.eatWhile(/[^\\s>]/);\n      stream.next();\n    }\n    token.name = 'string.special';\n\n  } else if (aChar === '|' && state.expectVariable) {\n    token.context = new Context(nextTemporaries, context);\n\n  } else if (/[\\[\\]{}()]/.test(aChar)) {\n    token.name = 'bracket';\n    token.eos = /[\\[{(]/.test(aChar);\n\n    if (aChar === '[') {\n      state.indentation++;\n    } else if (aChar === ']') {\n      state.indentation = Math.max(0, state.indentation - 1);\n    }\n\n  } else if (specialChars.test(aChar)) {\n    stream.eatWhile(specialChars);\n    token.name = 'operator';\n    token.eos = aChar !== ';'; // ; cascaded message expression\n\n  } else if (/\\d/.test(aChar)) {\n    stream.eatWhile(/[\\w\\d]/);\n    token.name = 'number';\n\n  } else if (/[\\w_]/.test(aChar)) {\n    stream.eatWhile(/[\\w\\d_]/);\n    token.name = state.expectVariable ? (keywords.test(stream.current()) ? 'keyword' : 'variable') : null;\n\n  } else {\n    token.eos = state.expectVariable;\n  }\n\n  return token;\n};\n\nvar nextComment = function(stream, context) {\n  stream.eatWhile(/[^\"]/);\n  return new Token('comment', stream.eat('\"') ? context.parent : context, true);\n};\n\nvar nextString = function(stream, context) {\n  stream.eatWhile(/[^']/);\n  return new Token('string', stream.eat('\\'') ? context.parent : context, false);\n};\n\nvar nextSymbol = function(stream, context) {\n  stream.eatWhile(/[^']/);\n  return new Token('string.special', stream.eat('\\'') ? context.parent : context, false);\n};\n\nvar nextTemporaries = function(stream, context) {\n  var token = new Token(null, context, false);\n  var aChar = stream.next();\n\n  if (aChar === '|') {\n    token.context = context.parent;\n    token.eos = true;\n\n  } else {\n    stream.eatWhile(/[^|]/);\n    token.name = 'variable';\n  }\n\n  return token;\n};\n\nexport const smalltalk = {\n  name: \"smalltalk\",\n\n  startState: function() {\n    return new State;\n  },\n\n  token: function(stream, state) {\n    state.userIndent(stream.indentation(), stream.indentUnit);\n\n    if (stream.eatSpace()) {\n      return null;\n    }\n\n    var token = state.context.next(stream, state.context, state);\n    state.context = token.context;\n    state.expectVariable = token.eos;\n\n    return token.name;\n  },\n\n  blankLine: function(state, indentUnit) {\n    state.userIndent(0, indentUnit);\n  },\n\n  indent: function(state, textAfter, cx) {\n    var i = state.context.next === next && textAfter && textAfter.charAt(0) === ']' ? -1 : state.userIndentationDelta;\n    return (state.indentation + i) * cx.unit;\n  },\n\n  languageData: {\n    indentOnInput: /^\\s*\\]$/\n  }\n}\n"],"names":["specialChars","keywords","Context","tokenizer","parent","Token","name","context","eos","State","next","indentation","indentUnit","stream","state","token","aChar","nextComment","nextString","nextSymbol","nextTemporaries","smalltalk","textAfter","cx"],"mappings":"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","x_google_ignoreList":[0]}